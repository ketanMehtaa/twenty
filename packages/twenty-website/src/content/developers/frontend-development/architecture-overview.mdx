---
title: Frontend Architecture Overview
info: Complete guide to twenty-front architecture, patterns and main components
icon: TbBox
image: /images/user-guide/fields/field.png
---

This comprehensive guide explores the architecture of Twenty's frontend application (`twenty-front`), a modern React-based CRM built with TypeScript. The frontend follows a modular, scalable architecture designed for maintainability and developer productivity.

## Table of Contents

- [Technology Stack](#technology-stack)
- [Architecture Overview](#architecture-overview)
- [Folder Structure](#folder-structure)
- [Core Architectural Patterns](#core-architectural-patterns)
- [Main Modules](#main-modules)
- [Data Flow Architecture](#data-flow-architecture)
- [State Management](#state-management)
- [Routing Architecture](#routing-architecture)
- [UI Component System](#ui-component-system)
- [Development Workflow](#development-workflow)

## Technology Stack

The twenty-front application is built on a modern, production-ready technology stack:

### Core Framework
- **React 18** - Modern React with concurrent features
- **TypeScript** - Type-safe JavaScript with strict typing
- **Vite** - Next-generation frontend build tool for fast development

### State Management
- **Recoil** - Flexible state management with atoms and selectors
- **Apollo Client** - GraphQL client with built-in caching

### Styling
- **Emotion** - CSS-in-JS library for component styling
- **Styled Components** - Component-level styling with theming support

### GraphQL & Data
- **GraphQL** - Query language for the API
- **Apollo Client** - Comprehensive GraphQL client
- **GraphQL Yoga** - GraphQL server integration
- **GraphQL Code Generator** - Automatic TypeScript types generation

### UI & Interaction
- **React Hook Form** - Performant form management
- **@xyflow/react** - For workflow diagram visualizations
- **@hello-pangea/dnd** - Drag and drop functionality
- **react-router-dom** - Client-side routing
- **react-datepicker** - Date selection components
- **BlockNote** - Rich text editor with Markdown support

### Internationalization
- **Lingui** - Modern i18n framework for React

### Testing & Quality
- **Jest** - JavaScript testing framework
- **Storybook** - Component development and documentation
- **ESLint** - Code linting with custom rules
- **Prettier** - Code formatting

### Monorepo Management
- **Nx** - Smart monorepo build system
- **Yarn 4** - Package manager with workspaces

## Architecture Overview

Twenty-front follows a **feature-based modular architecture** where each module represents a business feature or a cohesive set of functionality. This architecture promotes:

- **Separation of Concerns** - Clear boundaries between features
- **Scalability** - Easy to add new features without affecting existing ones
- **Reusability** - Shared components and utilities across modules
- **Maintainability** - Easier to understand, test, and modify code
- **Type Safety** - Comprehensive TypeScript coverage

### High-Level Architecture Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                      twenty-front                            │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌──────────┐    ┌──────────┐    ┌──────────────┐          │
│  │  Pages   │───▶│  Modules │───▶│  UI Library  │          │
│  │          │    │          │    │  (twenty-ui) │          │
│  └──────────┘    └──────────┘    └──────────────┘          │
│       │               │                   │                  │
│       │               │                   │                  │
│       ▼               ▼                   ▼                  │
│  ┌───────────────────────────────────────────────┐          │
│  │           State Management (Recoil)            │          │
│  └───────────────────────────────────────────────┘          │
│                         │                                    │
│                         ▼                                    │
│  ┌───────────────────────────────────────────────┐          │
│  │         GraphQL Client (Apollo)                │          │
│  └───────────────────────────────────────────────┘          │
│                         │                                    │
└─────────────────────────┼────────────────────────────────────┘
                          │
                          ▼
              ┌──────────────────────┐
              │   twenty-server      │
              │   (GraphQL API)      │
              └──────────────────────┘
```

## Folder Structure

The twenty-front source code is organized in a clear, hierarchical structure:

```
twenty-front/
├── src/
│   ├── modules/              # Feature modules (51 modules)
│   │   ├── accounts/         # Account management
│   │   ├── activities/       # Tasks, notes, emails
│   │   ├── analytics/        # Analytics and reporting
│   │   ├── auth/             # Authentication & authorization
│   │   ├── billing/          # Billing and subscriptions
│   │   ├── command-menu/     # Command palette (Cmd+K)
│   │   ├── object-record/    # Core record management
│   │   ├── object-metadata/  # Metadata system
│   │   ├── settings/         # App settings
│   │   ├── workflow/         # Workflow automation
│   │   ├── ui/              # Reusable UI components
│   │   └── ...              # Other feature modules
│   │
│   ├── pages/               # Top-level page components
│   │   ├── auth/            # Authentication pages
│   │   ├── object-record/   # Record list/detail pages
│   │   ├── settings/        # Settings pages
│   │   └── ...
│   │
│   ├── config/              # App configuration
│   ├── generated/           # Generated GraphQL types
│   ├── generated-metadata/  # Generated metadata types
│   ├── hooks/               # Global hooks
│   ├── testing/             # Test utilities & decorators
│   ├── types/               # Global TypeScript types
│   ├── utils/               # Global utility functions
│   ├── locales/             # i18n translation files
│   └── index.tsx            # Application entry point
│
├── public/                  # Static assets
├── .storybook/             # Storybook configuration
└── package.json            # Dependencies & scripts
```

### Module Structure Convention

Each module follows a consistent internal structure:

```
module-name/
├── components/           # React components
│   ├── ComponentName.tsx
│   └── __tests__/       # Component tests
├── hooks/               # Custom React hooks
│   ├── internal/        # Internal hooks (not exported)
│   └── useModuleHook.ts
├── states/              # Recoil state atoms/selectors
│   ├── selectors/       # Recoil selectors
│   └── atomState.ts
├── graphql/             # GraphQL operations
│   ├── fragments/       # GraphQL fragments
│   ├── queries/         # GraphQL queries
│   └── mutations/       # GraphQL mutations
├── contexts/            # React contexts
├── types/               # TypeScript types
├── utils/               # Utility functions
└── constants/           # Constants and enums
```

## Core Architectural Patterns

### 1. Feature-Based Modules

Twenty-front is organized around **feature modules** rather than technical layers. Each module encapsulates:

- **Components** - UI components specific to the feature
- **Business Logic** - Hooks and utilities for feature functionality
- **State** - Recoil atoms and selectors for local state
- **Data Layer** - GraphQL queries, mutations, and fragments
- **Types** - TypeScript definitions for the feature

**Benefits:**
- Easy to locate code related to a specific feature
- Modules can be developed and tested independently
- Clear ownership and boundaries
- Easier onboarding for new developers

### 2. Separation of UI and Business Logic

The architecture maintains a clear separation between:

**UI Module (`modules/ui/`):**
- Pure, reusable UI components
- No business logic or feature-specific code
- Can be used across any feature module
- Easily testable in isolation
- Also available via the `twenty-ui` package

**Feature Modules:**
- Compose UI components with business logic
- Feature-specific state management
- GraphQL operations
- Business rules and validations

This separation ensures:
- UI consistency across the application
- Easy to update designs without affecting business logic
- Components can be developed in Storybook independently
- Better testability

### 3. Component State vs Global State

The architecture uses a hybrid approach to state management:

**Component State (useState):**
- Used for UI-only state (open/closed, hover, focus)
- Temporary state that doesn't need to persist
- State that doesn't need to be shared

**Recoil Atoms (Global State):**
- Shared state across components
- Application-level state
- State that needs to persist across navigation
- Complex state with selectors

**Apollo Cache:**
- Server data from GraphQL queries
- Normalized cache for efficient updates
- Optimistic updates for better UX

### 4. Component Patterns

**Functional Components Only:**
```tsx
// ✅ Correct pattern
export const MyComponent = ({ name }: MyComponentProps) => {
  return <div>Hello {name}</div>;
};
```

**Named Exports:**
```tsx
// ✅ All exports are named (no default exports)
export { MyComponent } from './MyComponent';
export { useMyHook } from './useMyHook';
export type { MyType } from './types';
```

**Component Instance Context:**
- Uses component instance contexts for reusable components
- Allows multiple instances of the same component with isolated state
- Pattern used extensively in table, field, and record components

## Main Modules

Twenty-front consists of 51+ feature modules. Here are the most important ones:

### Core Record Management

**`object-record/`** - The heart of the CRM functionality
- **record-index/** - List views with filtering, sorting, pagination
- **record-table/** - Data grid component for records
- **record-board/** - Kanban board view
- **record-calendar/** - Calendar view for records
- **record-show/** - Detail view for individual records
- **record-field/** - Field components for different data types
- **record-picker/** - Record selection components
- **object-filter-dropdown/** - Filtering UI and logic
- **object-options-dropdown/** - Record actions menu

**`object-metadata/`** - Dynamic schema system
- Metadata-driven field rendering
- Custom object definitions
- Field type system
- Relationship management

### User Interface

**`ui/`** - Reusable UI component library
- **field/** - Field display and input components
  - `display/` - Read-only field displays
  - `input/` - Editable field inputs
- **layout/** - Layout components (modals, drawers, panels)
- **navigation/** - Navigation components (menu, breadcrumbs)
- **feedback/** - User feedback (snackbars, dialogs)
- **utilities/** - Utility components and hooks
- **theme/** - Theming system and design tokens

### Navigation & Routing

**`app/`** - Core application setup
- **components/AppRouter.tsx** - Main routing configuration
- **components/App.tsx** - Root application component
- **effect-components/** - Side effects and initialization

**`navigation/`** - Navigation system
- Navigation drawer
- Menu items and links
- Navigation state management

### Authentication & Authorization

**`auth/`** - Authentication system
- Sign-in/sign-up flows
- OAuth providers (Google, Microsoft)
- Token management
- Password reset
- Session management

**`workspace-member/`** - User and role management
- Member profiles
- Permissions
- Role-based access control

### Activities & Collaboration

**`activities/`** - Activity management
- Tasks
- Notes
- Comments
- Email integration
- Timeline view

**`command-menu/`** - Command palette (Cmd+K)
- Quick actions
- Search
- Navigation shortcuts

### Workflow Automation

**`workflow/`** - Workflow builder and execution
- **workflow-diagram/** - Visual workflow builder
- **workflow-steps/** - Step definitions
- **workflow-trigger/** - Trigger configuration
- Workflow execution tracking

### Settings & Configuration

**`settings/`** - Application settings
- Workspace settings
- User preferences
- Integration settings
- Developer tools
- API keys

**`client-config/`** - Client configuration
- Feature flags
- Environment variables
- Remote configuration

### Data Management

**`databases/`** - Database schema management
- **data-model-overview/** - Schema visualization
- Table management
- Field configuration

**`spreadsheet-import/`** - Import functionality
- CSV import
- Data validation
- Field mapping

### Analytics & Reporting

**`analytics/`** - Analytics dashboard
- Charts and visualizations
- Metrics tracking
- Custom reports

### Other Key Modules

- **`apollo/`** - Apollo Client configuration and utilities
- **`search/`** - Global search functionality
- **`favorites/`** - Favorites management
- **`view/`** - View management (filters, sorts)
- **`prefetch/`** - Data prefetching strategies
- **`error-handler/`** - Global error handling
- **`localization/`** - Internationalization

## Data Flow Architecture

### Request Flow

```
┌──────────────┐
│  Component   │
└──────┬───────┘
       │ 1. User Action
       ▼
┌──────────────────┐
│  Event Handler   │
└──────┬───────────┘
       │ 2. Call Hook/Query
       ▼
┌────────────────────┐
│  Custom Hook       │
│  (useQueryRecord)  │
└──────┬─────────────┘
       │ 3. Execute GraphQL
       ▼
┌──────────────────────┐
│  Apollo Client       │
│  (Cache Check)       │
└──────┬───────────────┘
       │ 4. Network Request
       ▼
┌──────────────────────┐
│  GraphQL API         │
│  (twenty-server)     │
└──────┬───────────────┘
       │ 5. Response
       ▼
┌──────────────────────┐
│  Apollo Cache Update │
└──────┬───────────────┘
       │ 6. Component Re-render
       ▼
┌──────────────┐
│  UI Update   │
└──────────────┘
```

### State Update Flow

```
┌─────────────┐
│  Component  │
└──────┬──────┘
       │ 1. User Input
       ▼
┌────────────────────┐
│  Event Handler     │
│  (handleChange)    │
└──────┬─────────────┘
       │ 2. Update Atom
       ▼
┌────────────────────┐
│  Recoil Atom       │
│  (setState)        │
└──────┬─────────────┘
       │ 3. Notify Subscribers
       ▼
┌────────────────────┐
│  All Components    │
│  Using This Atom   │
└──────┬─────────────┘
       │ 4. Re-render
       ▼
┌─────────────┐
│  UI Update  │
└─────────────┘
```

## State Management

Twenty-front uses **Recoil** for application state management, providing a flexible and performant solution.

### Recoil Atoms

Atoms are units of state that components can subscribe to:

```tsx
// Example: Current user state
export const currentUserState = atom<User | null>({
  key: 'currentUserState',
  default: null,
});

// Usage in component
const [currentUser, setCurrentUser] = useRecoilState(currentUserState);
```

### Recoil Selectors

Selectors compute derived state:

```tsx
// Example: Filtered records selector
export const filteredRecordsSelector = selector({
  key: 'filteredRecordsSelector',
  get: ({ get }) => {
    const records = get(recordsState);
    const filters = get(filtersState);
    return applyFilters(records, filters);
  },
});
```

### Component State Pattern

For reusable components with multiple instances, Twenty uses **component state** with instance contexts:

```tsx
// Create component-specific state
export const myComponentState = createComponentState<string>({
  key: 'myComponentState',
  defaultValue: '',
  componentInstanceContext: MyComponentInstanceContext,
});

// Usage with instance ID
const MyComponent = () => {
  const [value, setValue] = useRecoilComponentState(
    myComponentState,
    'unique-instance-id'
  );
  return <input value={value} onChange={(e) => setValue(e.target.value)} />;
};
```

### State Organization

State is organized by feature:
- **Local to module** - State used only within a module stays in `module/states/`
- **Shared state** - Cross-module state is carefully managed
- **Internal states** - Private state goes in `module/states/internal/`

## Routing Architecture

Twenty-front uses **react-router-dom v6** for client-side routing.

### Route Structure

```tsx
// Main routes in AppRouter.tsx
<Routes>
  {/* Auth routes */}
  <Route path="/verify" element={<Verify />} />
  <Route path="/sign-in" element={<SignIn />} />
  <Route path="/sign-up" element={<SignUp />} />
  
  {/* Protected routes */}
  <Route element={<AuthenticatedRoute />}>
    <Route path="/objects/:objectSlug" element={<RecordIndex />} />
    <Route path="/objects/:objectSlug/:recordId" element={<RecordShow />} />
    <Route path="/settings/*" element={<SettingsRoutes />} />
  </Route>
  
  {/* Catch all */}
  <Route path="*" element={<NotFound />} />
</Routes>
```

### Dynamic Routes

Routes are metadata-driven:
- Object routes are generated from metadata (`/objects/:objectSlug`)
- Custom objects automatically get routes
- Settings routes are nested with subroutes

### Route Protection

- **AuthenticatedRoute** - Wraps protected routes
- Checks authentication status
- Redirects to sign-in if not authenticated
- Handles workspace selection

## UI Component System

The UI system is built on reusable, composable components organized by function.

### Component Categories

**Display Components** (`ui/display/`)
- Avatar, Chip, Tag
- Text displays
- Icon components
- Badges and labels

**Input Components** (`ui/input/`)
- TextInput, Select, Checkbox
- DatePicker, ColorPicker
- Button variants
- Form controls

**Field Components** (`ui/field/`)
- Field display components (read-only)
- Field input components (editable)
- Field-specific logic
- Type-specific renderers

**Layout Components** (`ui/layout/`)
- Modal, Drawer
- Card, Section
- Page layouts
- Dropdown menus

**Navigation Components** (`ui/navigation/`)
- NavigationDrawer
- Breadcrumbs
- Menu items
- Step bar

**Feedback Components** (`ui/feedback/`)
- SnackBar (toast notifications)
- DialogManager
- Progress indicators
- Loading states

### Design System

The UI follows a comprehensive design system:

**Theme Structure:**
```tsx
const theme = {
  color: {
    // Color palette
    blue: { ... },
    gray: { ... },
    // Semantic colors
    primary: '...',
    background: '...',
  },
  font: {
    size: { xs, sm, md, lg, xl },
    weight: { regular, medium, semiBold, bold },
    family: 'Inter, sans-serif',
  },
  spacing: (multiplier) => `${multiplier * 4}px`,
  border: {
    radius: { sm, md, lg },
    width: { sm, md },
  },
  // ... more theme properties
};
```

**Styled Components Pattern:**
```tsx
const StyledButton = styled.button`
  color: ${({ theme }) => theme.font.color.primary};
  font-size: ${({ theme }) => theme.font.size.md};
  padding: ${({ theme }) => theme.spacing(2)};
  border-radius: ${({ theme }) => theme.border.radius.sm};
`;
```

## Development Workflow

### Running the Application

```bash
# Start development server (port 3001)
npx nx start twenty-front

# Build for production
npx nx build twenty-front

# Run tests
npx nx test twenty-front

# Run Storybook
npx nx storybook twenty-front
```

### Code Generation

GraphQL types are automatically generated:

```bash
# Generate TypeScript types from GraphQL schema
npx nx run twenty-front:graphql:generate
```

### Linting and Formatting

```bash
# Lint code
npx nx lint twenty-front

# Auto-fix linting issues
npx nx lint twenty-front --fix

# Format code
npx nx fmt twenty-front
```

### Testing Strategy

- **Unit Tests** - Jest tests for utilities and hooks
- **Component Tests** - Jest tests for component logic
- **Storybook** - Visual testing and documentation
- **Integration Tests** - End-to-end with Playwright (separate package)

### Hot Module Replacement

Vite provides instant HMR:
- Changes reflect immediately in the browser
- State is preserved during updates
- Fast feedback loop

## Architecture Principles

### 1. Convention Over Configuration

- Consistent folder structure across modules
- Predictable file naming
- Standard patterns for common tasks

### 2. Type Safety First

- Strict TypeScript configuration
- No `any` types allowed
- Generated types from GraphQL schema
- Comprehensive type coverage

### 3. Performance Optimization

- Code splitting with dynamic imports
- Lazy loading of routes and components
- Apollo Client caching
- Recoil for efficient re-renders
- Bundle size monitoring

### 4. Developer Experience

- Fast build times with Vite
- Hot module replacement
- Comprehensive error messages
- Storybook for component development
- Clear documentation

### 5. Maintainability

- Small, focused components
- Clear separation of concerns
- Comprehensive testing
- Code style enforcement
- Regular dependency updates

## Key Architectural Decisions

### Why Recoil?

- More flexible than Redux
- Better TypeScript support
- Less boilerplate
- Atomic state updates
- Great selector performance

### Why Apollo Client?

- Best-in-class GraphQL client
- Powerful caching system
- Optimistic updates
- Type generation
- DevTools support

### Why Vite?

- Incredibly fast dev server
- Efficient production builds
- Great TypeScript support
- Modern ESM-based architecture
- Excellent plugin ecosystem

### Why Monorepo with Nx?

- Shared code between packages
- Efficient task running
- Dependency graph analysis
- Better code organization
- Consistent tooling

## Related Documentation

- [Folder Architecture](/developers/frontend-development/folder-architecture-front) - Detailed folder structure
- [Best Practices](/developers/frontend-development/best-practices-front) - Coding standards
- [Style Guide](/developers/frontend-development/style-guide) - Code style rules
- [UI Kit](/developers/ui-kit/components) - Component library
- [Frontend Commands](/developers/frontend-development/frontend-commands) - CLI commands

<ArticleEditContent></ArticleEditContent>

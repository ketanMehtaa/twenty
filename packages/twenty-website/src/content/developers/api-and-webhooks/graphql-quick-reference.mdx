---
title: GraphQL Quick Reference
icon: TbCode
image: /images/docs/getting-started/api.png
info: Quick reference guide for /graphql and /metadata endpoints
---

## Quick Comparison

| Feature | `/graphql` (Core API) | `/metadata` (Metadata API) |
|---------|----------------------|---------------------------|
| **URL** | `https://api.twenty.com/graphql` | `https://api.twenty.com/metadata` |
| **Purpose** | Query and modify CRM data | Configure data model |
| **Schema** | Dynamic per workspace | Fixed schema |
| **Data Type** | Records (people, companies) | Definitions (objects, fields) |
| **Authentication** | API Key (workspace access) | API Key (admin access) |
| **Typical Users** | Integrations, apps, scripts | Admin tools, schema managers |
| **Cache Strategy** | Schema cached by version | Short TTL |
| **Example Query** | `{ people { ... } }` | N/A (field resolvers) |
| **Example Mutation** | `createPerson(...)` | `createOneField(...)` |

## Core API (`/graphql`) - Quick Examples

### Fetching Data

```graphql
# Get all people with pagination
query GetPeople {
  people(first: 10) {
    edges {
      node {
        id
        name { firstName lastName }
        email
        company { name }
      }
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}

# Get a single person
query GetPerson {
  person(id: "uuid-here") {
    id
    name { firstName lastName }
    email
  }
}

# Filter and sort
query FilterPeople {
  people(
    filter: {
      name: { firstName: { eq: "John" } }
    }
    orderBy: { createdAt: DescNullsLast }
  ) {
    edges {
      node {
        id
        name { firstName lastName }
      }
    }
  }
}
```

### Creating Data

```graphql
# Create a person
mutation CreatePerson {
  createPerson(
    data: {
      name: { firstName: "Jane", lastName: "Doe" }
      email: "jane@example.com"
    }
  ) {
    id
    name { firstName lastName }
    email
  }
}

# Create multiple records
mutation CreateManyPeople {
  createPeople(
    data: [
      { name: { firstName: "John", lastName: "Smith" } }
      { name: { firstName: "Alice", lastName: "Johnson" } }
    ]
  ) {
    id
    name { firstName lastName }
  }
}
```

### Updating Data

```graphql
# Update a person
mutation UpdatePerson {
  updatePerson(
    id: "uuid-here"
    data: {
      email: "newemail@example.com"
    }
  ) {
    id
    email
  }
}

# Update multiple records
mutation UpdateManyPeople {
  updatePeople(
    filter: { company: { name: { eq: "Acme Corp" } } }
    data: { tag: "acme-customer" }
  ) {
    id
    tag
  }
}
```

### Deleting Data

```graphql
# Soft delete (can be restored)
mutation DeletePerson {
  deletePerson(id: "uuid-here") {
    id
  }
}

# Restore soft-deleted record
mutation RestorePerson {
  restorePerson(id: "uuid-here") {
    id
  }
}

# Permanent delete
mutation DestroyPerson {
  destroyPerson(id: "uuid-here") {
    id
  }
}
```

## Metadata API (`/metadata`) - Quick Examples

### Managing Fields

```graphql
# Create a text field
mutation CreateTextField {
  createOneField(
    input: {
      field: {
        objectMetadataId: "object-uuid"
        type: TEXT
        name: "customField"
        label: "Custom Field"
        description: "My custom field"
        icon: "IconTextSize"
        defaultValue: "''"
      }
    }
  ) {
    id
    name
    label
    type
    isCustom
  }
}

# Create a number field
mutation CreateNumberField {
  createOneField(
    input: {
      field: {
        objectMetadataId: "object-uuid"
        type: NUMBER
        name: "score"
        label: "Score"
        description: "Customer score"
        defaultValue: "0"
      }
    }
  ) {
    id
    name
    type
  }
}

# Create a select field
mutation CreateSelectField {
  createOneField(
    input: {
      field: {
        objectMetadataId: "object-uuid"
        type: SELECT
        name: "priority"
        label: "Priority"
        options: [
          { label: "Low", value: "low", color: "green" }
          { label: "High", value: "high", color: "red" }
        ]
      }
    }
  ) {
    id
    name
    options { label value color }
  }
}

# Update a field
mutation UpdateField {
  updateOneField(
    input: {
      id: "field-uuid"
      update: {
        label: "New Label"
        description: "Updated description"
      }
    }
  ) {
    id
    label
    description
  }
}

# Delete a field
mutation DeleteField {
  deleteOneField(
    input: { id: "field-uuid" }
  ) {
    id
    name
  }
}
```

### Managing Objects

```graphql
# Update object properties
mutation UpdateObject {
  updateOneObject(
    input: {
      id: "object-uuid"
      update: {
        labelSingular: "Client"
        labelPlural: "Clients"
        description: "Our clients"
        icon: "IconBuilding"
      }
    }
  ) {
    id
    nameSingular
    labelSingular
    labelPlural
    description
    icon
  }
}

# Delete a custom object
mutation DeleteObject {
  deleteOneObject(
    input: { id: "object-uuid" }
  ) {
    id
    nameSingular
  }
}
```

### Creating Relationships

```graphql
# Create a many-to-one relationship
mutation CreateRelation {
  createOneField(
    input: {
      field: {
        objectMetadataId: "task-object-uuid"
        type: RELATION
        name: "assignee"
        label: "Assignee"
        description: "Person assigned to task"
        relationDefinition: {
          sourceObjectMetadataId: "task-object-uuid"
          targetObjectMetadataId: "person-object-uuid"
          relationshipType: MANY_TO_ONE
        }
      }
    }
  ) {
    id
    name
    relationMetadata {
      id
      relationType
      fromObjectMetadata { nameSingular }
      toObjectMetadata { nameSingular }
    }
  }
}
```

## Field Types Reference

| Type | Description | Example Value | Default Value |
|------|-------------|---------------|---------------|
| `TEXT` | Short text | `"Hello"` | `"''"` |
| `LONG_TEXT` | Multi-line text | `"Long text..."` | `"''"` |
| `NUMBER` | Integer/decimal | `42` | `"0"` |
| `BOOLEAN` | True/false | `true` | `"false"` |
| `DATE_TIME` | Date & time | `"2024-01-01T10:00:00Z"` | `"now()"` |
| `DATE` | Date only | `"2024-01-01"` | `"now()"` |
| `EMAIL` | Email address | `"user@example.com"` | `"''"` |
| `PHONE` | Phone number | `"+1234567890"` | `"''"` |
| `URL` | Web URL | `"https://example.com"` | `"''"` |
| `SELECT` | Single choice | `"option1"` | First option |
| `MULTI_SELECT` | Multiple choices | `["opt1", "opt2"]` | `"[]"` |
| `CURRENCY` | Money value | `{ amount: 100, currency: "USD" }` | `"{ amount: 0, currency: 'USD' }"` |
| `RATING` | Star rating | `4` (1-5) | `"0"` |
| `RELATION` | Object relation | Related object | N/A |
| `FULL_NAME` | Name composite | `{ firstName: "John", lastName: "Doe" }` | `"{ firstName: '', lastName: '' }"` |
| `ADDRESS` | Address composite | Full address object | Address structure |

## Common Patterns

### Pattern 1: Create Custom Object with Fields

```graphql
# Step 1: Create object (via UI or existing API)
# Step 2: Add fields via Metadata API

mutation AddCustomerFields {
  field1: createOneField(
    input: {
      field: {
        objectMetadataId: "customer-object-uuid"
        type: TEXT
        name: "industry"
        label: "Industry"
      }
    }
  ) { id }
  
  field2: createOneField(
    input: {
      field: {
        objectMetadataId: "customer-object-uuid"
        type: SELECT
        name: "tier"
        label: "Customer Tier"
        options: [
          { label: "Bronze", value: "bronze", color: "orange" }
          { label: "Silver", value: "silver", color: "gray" }
          { label: "Gold", value: "gold", color: "yellow" }
        ]
      }
    }
  ) { id }
}

# Step 3: Use Core API to add data
mutation CreateCustomer {
  createCustomer(
    data: {
      name: "Acme Corp"
      industry: "Technology"
      tier: "gold"
    }
  ) {
    id
    name
    industry
    tier
  }
}
```

### Pattern 2: Dynamic Form Building

```graphql
# 1. Fetch field definitions (via resolver or cached)
# Then build form based on field metadata
# 2. Submit form data via Core API

mutation SubmitForm($data: PersonCreateInput!) {
  createPerson(data: $data) {
    id
  }
}
```

### Pattern 3: Bulk Operations

```graphql
# Import multiple records efficiently
mutation BulkImport($records: [PersonCreateInput!]!) {
  createPeople(data: $records) {
    id
    name { firstName lastName }
  }
}
```

## Authentication Examples

### Using cURL

```bash
# Core API request
curl -X POST https://api.twenty.com/graphql \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "{ people { edges { node { id name { firstName } } } } }"
  }'

# Metadata API request
curl -X POST https://api.twenty.com/metadata \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "mutation { createOneField(input: { ... }) { id } }"
  }'
```

### Using JavaScript

```javascript
// Core API with fetch
const response = await fetch('https://api.twenty.com/graphql', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    query: `
      query GetPeople {
        people(first: 10) {
          edges {
            node {
              id
              name { firstName lastName }
            }
          }
        }
      }
    `,
  }),
});

const data = await response.json();
console.log(data);

// Metadata API with fetch
const metaResponse = await fetch('https://api.twenty.com/metadata', {
  method: 'POST',
  headers: {
    'Authorization': `Bearer ${apiKey}`,
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    query: `
      mutation CreateField {
        createOneField(
          input: {
            field: {
              objectMetadataId: "uuid"
              type: TEXT
              name: "myField"
              label: "My Field"
            }
          }
        ) {
          id
          name
        }
      }
    `,
  }),
});
```

### Using Python

```python
import requests

# Core API
url = "https://api.twenty.com/graphql"
headers = {
    "Authorization": f"Bearer {api_key}",
    "Content-Type": "application/json"
}

query = """
query GetPeople {
  people(first: 10) {
    edges {
      node {
        id
        name { firstName lastName }
      }
    }
  }
}
"""

response = requests.post(url, json={"query": query}, headers=headers)
data = response.json()
print(data)
```

## Error Handling

### Common Error Codes

```graphql
# Example error response
{
  "errors": [
    {
      "message": "Record not found",
      "extensions": {
        "code": "NOT_FOUND"
      }
    }
  ]
}
```

**Core API Error Codes:**
- `UNAUTHENTICATED` - Invalid or missing API key
- `FORBIDDEN` - Insufficient permissions
- `NOT_FOUND` - Record doesn't exist
- `VALIDATION_ERROR` - Invalid input
- `INTERNAL_SERVER_ERROR` - Server error

**Metadata API Error Codes:**
- `FORBIDDEN_EXCEPTION` - No admin permissions
- `CONFLICT` - Field/object name exists
- `INVALID_FIELD_INPUT` - Invalid field config
- `FIELD_MUTATION_NOT_ALLOWED` - Can't modify standard field

### Error Handling Example

```javascript
try {
  const response = await fetch('https://api.twenty.com/graphql', {
    method: 'POST',
    headers: {
      'Authorization': `Bearer ${apiKey}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify({ query }),
  });

  const data = await response.json();

  if (data.errors) {
    data.errors.forEach(error => {
      console.error(`Error: ${error.message}`);
      console.error(`Code: ${error.extensions?.code}`);
    });
  } else {
    console.log('Success:', data.data);
  }
} catch (error) {
  console.error('Network error:', error);
}
```

## Rate Limits

- **Default**: 100 requests/minute per API key
- **Headers**: Check `X-RateLimit-*` headers in response
- **Response**: 429 status code when exceeded

```javascript
// Check rate limit headers
const response = await fetch(url, options);
console.log('Limit:', response.headers.get('X-RateLimit-Limit'));
console.log('Remaining:', response.headers.get('X-RateLimit-Remaining'));
console.log('Reset:', response.headers.get('X-RateLimit-Reset'));
```

## Testing with Playground

Both endpoints provide GraphQL Playground in development:

- **Core API**: `http://localhost:3000/graphql`
- **Metadata API**: `http://localhost:3000/metadata`

Features:
- Schema explorer
- Auto-complete
- Query history
- Variable editor

## Best Practices

### Core API
✅ Use pagination for large datasets  
✅ Select only needed fields  
✅ Use filters server-side  
✅ Batch create/update operations  
✅ Handle errors gracefully  
❌ Don't fetch all data at once  
❌ Don't query deeply nested relations  

### Metadata API
✅ Batch field creation when possible  
✅ Validate field names before creation  
✅ Handle migration failures  
✅ Wait for cache invalidation  
✅ Use descriptive labels  
❌ Don't poll for metadata changes  
❌ Don't modify standard objects  

## Related Documentation

- [Full GraphQL Endpoints Documentation](/developers/api-and-webhooks/graphql-endpoints)
- [API Overview](/developers/api-and-webhooks/api)
- [Webhooks](/developers/api-and-webhooks/webhooks)
- [GraphQL Best Practices](/developers/graphql-apis)
- [REST API](/developers/rest-apis)
